import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import faker from 'faker'
import {range} from 'lodash'
import dayjs from 'dayjs';

import PListCard from './PListCard.vue';
import PI from '@/foundation/icons/PI.vue';
import PBadge from '@/data-display/badges/PBadge';
import { argTypes } from '@/data-display/cards/list-card/story-helper';
import { CARD_STYLE_TYPE } from '@/data-display/cards/card/config';


<Meta title='Data Display/Cards/List Card' parameters={{
    design: {
        type: 'figma',
        url: 'https://www.figma.com/file/wq4wSowBcADBuUrMEZLz6i/SpaceONE-Console-Design?node-id=2104%3A1508'
    }
}} argTypes={argTypes}/>


export const Template = (args, { argTypes }) => ({
    props: Object.keys(argTypes),
    components: { PListCard },
    template: `
    <div class="h-full w-full overflow p-8">
        <p-list-card
            :header="header"
            :style-type="styleType"
            :items="items"
            :loading="loading"
        >
            <template v-if="headerSlot" #header><div v-html="headerSlot"/></template>
            <template v-if="itemSlot" #item><div v-html="itemSlot"/></template>
</p-list-card>
    </div>
    `,
    setup() {
        return {}
    }
});


# List Card
<br/>
<br/>

## Basic

<Canvas>
    <Story name="Basic">
        {{
            components: { PListCard },
            template: `
    <div class="h-full w-full overflow p-8">
        <p-list-card
            header="Basic List Card"
            :items="items"
        >
        </p-list-card>
    </div>
    `,
            setup() {
                return {
                    items: range(10).map(() => faker.lorem.sentence(8))
                }
            }
        }}
    </Story>
</Canvas>

<br/>
<br/>

## Style Types

<Canvas>
    <Story name="Style Types">
        {{
            components: { PListCard },
            template: `
    <div class="h-full w-full overflow p-8 flex flex-wrap">
        <p-list-card v-for="styleType in styleTypes" :key="styleType" :header="styleType" :style-type="styleType"
            :items="items"
            class="m-4"
            style="width: 20rem;"
        >
        </p-list-card>
    </div>
    `,
            setup() {
                return {
                    styleTypes: Object.values(CARD_STYLE_TYPE),
                    items: range(4).map(() => faker.lorem.sentence(8))
                }
            }
        }}
    </Story>
</Canvas>

<br/>
<br/>

## Without Header

<br/>

If you give ```false``` to ```header``` props and don't give ```header``` slot, the header will be not displayed.<br/>

<Canvas>
    <Story name="Without Header">
        {{
            components: { PListCard },
            template: `
    <div class="h-full w-full overflow p-8">
        <p-list-card
            :header="false"
            :items="items"
        >
        </p-list-card>
    </div>
    `,
            setup() {
                return {
                    items: range(10).map(() => faker.lorem.sentence(8))
                }
            }
        }}
    </Story>
</Canvas>

<br/>
<br/>

## Slots

<Canvas>
    <Story name="Slots">
        {{
            components: { PListCard, PI, PBadge },
            template: `
    <div class="h-full w-full overflow p-8">
        <p-list-card :items="items">
            <template #header>Slot Case</template>
            <template #item="{item, index}">
                <div class="flex flex-col">
                    <div class="flex justify-between">
                        <span class="flex-grow inline-flex items-center text-sm">
                            <p-i :name="item.icon" width="1em" height="1em" class="mr-1 flex-shrink-0" />
                            <span class="leading-5">{{item.value}}</span>
                        </span>
                        <span class="flex-shrink-0">
                            <p-badge :style-type="item.badge === 'Acknowledged' ? 'red100' : 'blue200'" class="mr-2 text-xs text-gray-400">{{item.badge}}</p-badge>
                            <span class="text-xs text-gray-500">{{item.date}}</span>
                        </span>
                    </div>
                    <div v-if="item.description">
                        <p-i name="ic_reply" width="1rem" height="1rem" class="ml-4" />
                        <strong class="text-xs leading-5 text-gray-500 mr-1">{{item.description.message}}</strong>
                        <span class="text-xs leading-5 text-gray-400">{{item.date}}</span>
                    </div>
                </div>
            </template>
        </p-list-card>
    </div>
<!--<br>-->
    `,
            setup() {
                return {
                    items: range(10).map(() => ({
                        value: faker.lorem.sentence(6),
                        icon: faker.random.arrayElement(['ic_alert', 'ic_list_duplication']),
                        badge: faker.random.arrayElement(['Acknowledged', 'Triggered']),
                        date: dayjs(faker.date.past('2021')).format('MM/DD hh:mm'),
                        description: faker.random.arrayElement([{
                            message: faker.lorem.sentence(6),
                            date: dayjs(faker.date.past('2021')).format('MM/DD hh:mm')
                        }, undefined]),
                    }))
                }
            }
        }}
    </Story>
</Canvas>

<br/>
<br/>

## Playground

<Canvas>
    <Story name="Playground">
        {Template.bind({})}
    </Story>
</Canvas>

<ArgsTable story="Playground"/>

