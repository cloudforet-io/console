import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import PDynamicLayout from '@/data-display/dynamic/dynamic-layout/PDynamicLayout.vue';
import { I18nConnector } from '@/translations'
import { getDynamicLayoutRawTableArgTypes } from '@/data-display/dynamic/dynamic-layout/templates/raw-table/story-helper';
import mock from '@/data-display/dynamic/dynamic-layout/mock';

<Meta title='Data Display/Dynamic/Dynamic Layout/- [Table] Raw Table'
      argTypes={getDynamicLayoutRawTableArgTypes()}/>


export const Template = (args, { argTypes }) => ({
    props: Object.keys(argTypes),
    components: { PDynamicLayout },
    i18n: I18nConnector.i18n,
    template: `
      <p-dynamic-layout :name="name" type="raw-table"
                          :options="options"
                          :data="data"
                          :type-options="{
                              loading,
                              totalCount,
                              timezone,
                              selectIndex,
                              selectable,
                              multiSelect,
                              invalid,
                              colCopy,
                              excelVisible,
                              settingsVisible
                          }"
                          :fetch-options="{
                              sortBy,
                              sortDesc,
                              pageStart,
                              pageLimit,
                              searchText
                          }"
                           class="w-full"
                            @fetch="onFetch"
                            @select="onSelect"
                            @export="onExport"
                            @click-settings="onClickSettings"
            >
        </p-dynamic-layout>
    `,
    setup() {
        return {}
    }
});


# Raw Table Type
<br/>
<br/>

## Supported Options

| Name | Supported |
| ---- | ----------- |
| root_path | O |
| translation_id | O |
| fields | X |
| markdown | X |
| search | X |
| disable_search | O |
| headers | O |
| layout | X |


## Supported Fetch Options

| Name | Supported |
| ---- | ---- |
| sortBy | O |
| sortDesc | O |
| pageStart | O |
| pageLimit | O |
| searchText | O |
| queryTags | X |


## Supported Type Options

| Type Option Name | Supported |
| ---- | ---- |
| loading | O |
| totalCount | O |
| timezone | O |
| selectIndex | O |
| selectable | O |
| multiSelect | O |
| invalid | O |
| colCopy | O |
| excelVisible | O |
| settingsVisible | O |
| keyItemSets | X |
| valueHandlerMap | X |
| language | X |
| popupVisible | X |


## Supported Events
| Event Name | Supported |
| ---------- | ----------- |
| fetch | O |
| select | O |
| export | O |
| click-settings | X |
| update-popup-visible | X |

<br/>
<br/>

## Options Example

<br/>

### Options: Disable Search

```js
{
    disable_search: true
}
```

<Canvas>
    <Story name="Disable Search">
        {{
            components: { PDynamicLayout },
            template: `
                <p-dynamic-layout
                      name="Disable Search Raw Table"
                      type="raw-table"
                      :options="options"
                      :data="data"
                       class="w-full"
                ></p-dynamic-layout>
            `,
            setup() {
                return {
                    data: mock.rawTable.data,
                    options: {
                        disable_search: true,
                    },
                }
            }
        }}
    </Story>
</Canvas>

### Options: Headers
"headers" option is used to specify the order of the table headers.
```js
{
    headers: ['information', 'age', 'name', 'job']
}
```
<Canvas>
    <Story name="Headers">
        {{
            components: { PDynamicLayout },
            template: `
                <p-dynamic-layout
                      name="Disable Search Raw Table"
                      type="raw-table"
                      :options="options"
                      :data="data"
                       class="w-full"
                ></p-dynamic-layout>
            `,
            setup() {
                return {
                    data: mock.rawTable.data,
                    options: {
                        headers: ['information', 'age', 'name', 'job']
                    },
                }
            }
        }}
    </Story>
</Canvas>


<br/>
<br/>

## Playground

<Canvas>
    <Story name="Playground">
        {Template.bind({})}
    </Story>
</Canvas>

<ArgsTable story="Playground"/>

<br/>
<br/>
