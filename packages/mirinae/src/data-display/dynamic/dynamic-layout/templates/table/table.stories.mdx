import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import PDynamicLayout from '@/data-display/dynamic/dynamic-layout/PDynamicLayout.vue';
import { I18nConnector } from '@/translations'
import { getDynamicLayoutTableArgTypes } from '@/data-display/dynamic/dynamic-layout/templates/table/story-helper';

<Meta title='Data Display/Dynamic/Dynamic Layout/- [Table] Table'
      argTypes={getDynamicLayoutTableArgTypes()}/>


export const Template = (args, { argTypes }) => ({
    props: Object.keys(argTypes),
    components: { PDynamicLayout },
    i18n: I18nConnector.i18n,
    template: `
      <p-dynamic-layout :name="name" type="table"
                          :options="options"
                          :data="data"
                          :type-options="{
                              loading,
                              totalCount,
                              timezone,
                              selectIndex,
                              selectable,
                              multiSelect,
                              invalid,
                              colCopy,
                              excelVisible,
                              settingsVisible,
                          }"
                          :fetch-options="{
                              sortBy,
                              sortDesc,
                              pageStart,
                              pageLimit,
                              searchText
                          }"
                           class="w-full"
                            @fetch="onFetch"
                            @select="onSelect"
                            @export="onExport"
                            @click-settings="onClickSettings"
                            @click-row="onClickRow"
            >
        </p-dynamic-layout>
    `,
    setup() {
        return {}
    }
});


# Table Type
<br/>
<br/>

## Supported Options

| Name           | Supported |
|----------------|-----------|
| root_path      | O         |
| translation_id | O         |
| fields         | O         |
| markdown       | X         |
| layouts        | X         |
| search         | X         |
| disable_search | O         |
| layout         | X         |


## Supported Fetch Options

| Name       | Supported |
|------------|-----------|
| sortBy     | O         |
| sortDesc   | O         |
| pageStart  | O         |
| pageLimit  | O         |
| searchText | O         |
| queryTags  | X         |


## Supported Type Options

| Type Option Name | Supported |
|------------------|-----------|
| loading          | O         |
| totalCount       | O         |
| timezone         | O         |
| selectIndex      | O         |
| selectable       | O         |
| multiSelect      | O         |
| invalid          | O         |
| colCopy          | O         |
| excelVisible     | O         |
| settingsVisible  | O         |
| sortable         | O         |
| keyItemSets      | X         |
| valueHandlerMap  | X         |
| language         | X         |
| popupVisible     | X         |


## Supported Events

| Event Name           | Supported |
|----------------------|-----------|
| fetch                | O         |
| select               | O         |
| export               | O         |
| click-settings       | O         |
| click-row            | O         |
| update-popup-visible | X         |

<br/>
<br/>

## Playground

<Canvas>
    <Story name="Playground" >
        {Template.bind({})}
    </Story>
</Canvas>

<ArgsTable story="Playground"/>

<br/>
<br/>

