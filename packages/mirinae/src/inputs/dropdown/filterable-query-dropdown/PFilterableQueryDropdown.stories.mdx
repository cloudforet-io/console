import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import {
    getFilterableQueryDropdownArgTypes
} from "@/inputs/dropdown/filterable-query-dropdown/story-helper";

import PFilterableQueryDropdown
    from "@/inputs/dropdown/filterable-query-dropdown/PFilterableQueryDropdown.vue";
import { reactive, toRefs } from "vue";
import {
    useProxyValue
} from "@/hooks";
import { getKeyItemSets, getValueHandlerMap } from '@/inputs/dropdown/filterable-query-dropdown/mock';

<Meta title='Inputs/Dropdown/Filterable Query Dropdown' parameters={{
    design: {
        type: 'figma',
        url: 'figma url',
    }
}} argTypes={getFilterableQueryDropdownArgTypes()}/>


export const Template = (args, {argTypes}) => ({
    props: Object.keys(argTypes),
    components: { PFilterableQueryDropdown },
    template: `
        <div class="h-full w-full overflow p-8">
            <p-filterable-query-dropdown v-model:selected="proxyValue"
                            :keyItemSets="keyItemSets"
                            :valueHandlerMap="valueHandlerMap"
            ></p-filterable-query-dropdown>
        </div>
    `,
    setup(props, { emit }) {
        const state = reactive({
            proxyValue: useProxyValue('value', props, emit)
        });
        return {
            ...toRefs(state)
        }
    }
});

# Filterable Query Dropdown
<br/>

Filterable Query Dropdown is <b>```key:value``` format search dropdown.</b> <br/>


## Basic
<Canvas>
    <Story name="Basic" height="300px">
        {{
            components: { PFilterableQueryDropdown },
            template: `
<div class="h-full w-full overflow p-8">
    <p-filterable-query-dropdown
        :key-item-sets="keyItemSets"
        :value-handler-map="valueHandlerMap"
    ></p-filterable-query-dropdown>
</div>
    `,
            setup() {
                const keyItemSets = getKeyItemSets(5, 1)
                const valueHandlerMap = getValueHandlerMap(keyItemSets)
                return {
                    keyItemSets,
                    valueHandlerMap
                }
            }
        }}
    </Story>
</Canvas>


<br/>
<br/>


## Multi Selectable
<Canvas>
    <Story name="Multi Selectable" height="300px">
        {{
            components: { PFilterableQueryDropdown },
            template: `
<div class="h-full w-full overflow p-8">
    <p-filterable-query-dropdown
        :key-item-sets="keyItemSets"
        :value-handler-map="valueHandlerMap"
        multi-selectable
    ></p-filterable-query-dropdown>
</div>
    `,
            setup() {
                const keyItemSets = getKeyItemSets(5, 1)
                const valueHandlerMap = getValueHandlerMap(keyItemSets)
                return {
                    keyItemSets,
                    valueHandlerMap
                }
            }
        }}
    </Story>
</Canvas>

<br/>
<br/>

## Use Fixed Menu Style
<Canvas>
    <Story name="Use Fixed Menu Style">
        {{
            components: { PFilterableQueryDropdown },
            template: `
<div class="h-full w-full overflow p-8">
    <p-filterable-query-dropdown
        :key-item-sets="keyItemSets"
        :value-handler-map="valueHandlerMap"
        use-fixed-menu-style
        multi-selectable
    ></p-filterable-query-dropdown>
</div>
    `,
            setup() {
                const keyItemSets = getKeyItemSets(5, 1)
                const valueHandlerMap = getValueHandlerMap(keyItemSets)
                return {
                    keyItemSets,
                    valueHandlerMap
                }
            }
        }}
    </Story>
</Canvas>

<br/>
<br/>

## Playground

<Canvas>
    <Story name="Playground" height="300px">
        {Template.bind({})}
    </Story>
</Canvas>

<ArgsTable story="Playground"/>
