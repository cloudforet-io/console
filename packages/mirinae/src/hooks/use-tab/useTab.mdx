{/* useTab.mdx */}

import {Canvas, Meta, Controls} from '@storybook/blocks';

import * as useTabStories from './use-tab.stories';

<Meta of={useTabStories}/>


# useTab

The `useTab` hook manages tab-related state and behavior, supporting dynamic and complex tab structures. It offers several computed values to assist in tab management and allows for the use of a default item structure.

> **Note**: All hooks in the design system, including `useTab`, accept a single argument: an object named `Options`. This enhances clarity and ensures consistency across hook usage within the design system.

<br/>

## Options

`useTab` accepts an options object with the following properties:

- **`tabs`**: A `Ref` or a static array containing tab information. Each tab can be a `string` or an object that follows the `TabItem` structure, allowing customization like labels and sub-items.
- **`activeTab`**: A `Ref` or a static string representing the currently active tab. It must match one of the tab names provided in the `tabs` option.
- **`defaultItem`**: (optional) An object that provides default properties for all generated tabs. This ensures consistency across tab items when only partial information is provided.

<br/>

## Returns

- **`tabItems`**: A `ComputedRef` array containing the resolved tab items based on the `tabs` input and the optional `defaultItem`. It provides a processed list of tabs with consistent structure.
- **`keepAliveTabNames`**: A `ComputedRef` array listing the names of tabs marked to be kept alive (`keepAlive: true`).
- **`nonKeepAliveTabNames`**: A `ComputedRef` array listing the names of tabs not set to be kept alive.
- **`currentTabItem`**: A `ComputedRef` representing the currently active tab item based on the `activeTab` input. If no matching tab is found, it returns `undefined`.

<br/>

## `TabItem` Structure

> **Note**: All tab components in the design system extend a base structure called `TabItem`. This flexible structure allows components to customize and expand tab behavior while maintaining consistency. It ensures that different tab types share common properties like `name`, `label`, and `keepAlive`, and can include additional features as needed.

The `TabItem` interface supports the following properties:

- **`name`**: (required) The identifier for the tab.
- **`label`**: The display label for the tab. This supports translation results (`TranslateResult`), which can be a localized string or other message formats.
- **`keepAlive`**: A boolean indicating if the tab should be preserved when switching to other tabs.
- **`subItems`**: An optional array containing nested `TabItem` elements for hierarchical tab structures.
- **Custom Properties**: Additional properties from the `defaultItem` can be applied, enhancing flexibility and customization.

<br/>

## Type Declarations

```typescript
import type { ComputedRef, Ref } from 'vue';
import { computed, reactive } from 'vue';
import type { TranslateResult } from 'vue-i18n';

type TabItem<T extends object = Record<string, never>> = {
    name: string;
    label?: TranslateResult;
    keepAlive?: boolean;
    subItems?: Array<string | TabItem<T>>;
} & T;

export interface UseTabOptions<T extends object = Record<string, never>> {
    tabs: Ref<Array<string | TabItem<T>>> | Array<string | TabItem<T>>;
    activeTab: Ref<string> | string;
    defaultItem?: T;
}

interface UseTabReturns<T extends object> {
    tabItems: ComputedRef<TabItem<T>[]>;
    keepAliveTabNames: ComputedRef<string[]>;
    nonKeepAliveTabNames: ComputedRef<string[]>;
    currentTabItem: ComputedRef<TabItem<T> | undefined>;
}
```

## Demo
<br/>

### With String Tabs
<Canvas of={useTabStories.WithStringTabs}/>
<br/>

### With Object Tabs
<Canvas of={useTabStories.WithObjectTabs}/>
<br/>

### With Sub Items
<Canvas of={useTabStories.WithSubItems}/>
<br/>

### With Keep Alive
<Canvas of={useTabStories.WithKeepAlive}/>
<br/>

### With Default Item
<Canvas of={useTabStories.WithDefaultItem}/>
<br/>
